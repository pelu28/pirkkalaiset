<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Reading all kids using AJAX</title>
</head>
<body>
<script>
function readallpuolueandehdokas(){
    xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        var response=this.responseText;
        document.getElementById("result").innerHTML = response;
        var puoluelist=JSON.parse(response);
        printPuolueList(puoluelist);
       }
    };
    xmlhttp.open("GET", "/service/ehdokaslist/getpuolue", true);
    xmlhttp.send();   	
}

function printPuolueList(puoluelist){
	var txt="<ol>";
	for (i in puoluelist){
		txt=txt+"<li>"+puoluelist[i].nimi;
		txt=txt+"<ul>";
		var flist=puoluelist[i].puoluelist;
		for (k in flist){
			txt=txt+"<li>"+flist[k].nimi;
		}
		txt=txt+"</ul>";
	}
	txt=txt+"</ol>";
    document.getElementById("result2").innerHTML = txt;
}
</script>
<p>The result in plain JSON string</p>
<p id='result'>The result comes here</p>
<p>The result printed from Javacript object</p>
<p id='result2'>The result comes here</p>
<button onclick='readallpuolueandehdokas();'>read all kids and fish</button>

</body>
</html>